# ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

**ä½œæˆæ—¥**: 2024å¹´1æœˆ10æ—¥  
**æœ€çµ‚æ›´æ–°**: 2024å¹´1æœˆ10æ—¥  
**å¯¾è±¡**: Gmail + Discord + LINE è¿”ä¿¡æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ  ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—  
**è¨­è¨ˆæ–¹é‡**: æ‰‹å‹•è¿”ä¿¡æ”¯æ´ã€ãƒãƒ£ãƒ³ãƒãƒ«éä¾å­˜ã€MVPé‡è¦–

## ç›®æ¬¡

1. [è¨­è¨ˆãƒ—ãƒ­ã‚»ã‚¹æ¦‚è¦](#1-è¨­è¨ˆãƒ—ãƒ­ã‚»ã‚¹æ¦‚è¦)
2. [è¦ä»¶åˆ†æ](#2-è¦ä»¶åˆ†æ)
3. [æŠ€è¡“èª¿æŸ»çµæœ](#3-æŠ€è¡“èª¿æŸ»çµæœ)
4. [è¨­è¨ˆæ–¹é‡](#4-è¨­è¨ˆæ–¹é‡)
5. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#5-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
6. [çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼](#6-çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼)
7. [æŠ€è¡“ä»•æ§˜](#7-æŠ€è¡“ä»•æ§˜)
8. [å®Ÿè£…ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹](#8-å®Ÿè£…ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹)

---

## 1. è¨­è¨ˆãƒ—ãƒ­ã‚»ã‚¹æ¦‚è¦

### 1.1 è¨­è¨ˆãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[Step 1: è¦ä»¶æ–‡æ›¸åˆ†æ] --> B[Step 2: æ—¢å­˜ã‚³ãƒ¼ãƒ‰èª¿æŸ»]
    B --> C[Step 3: è¨­è¨ˆæ–¹é‡æ±ºå®š]
    C --> D[Step 4: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ]
    D --> E[Step 5: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°è¨­è¨ˆ]
    E --> F[å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º]
```

### 1.2 è¨­è¨ˆåŸå‰‡

- **å¯¾è©±å‹è¨­è¨ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: AIã®ç‹¬æ–­åˆ¤æ–­ã‚’ç¦æ­¢ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªã‚’å¿…é ˆ
- **æ®µéšçš„å®Ÿè£…**: MVP â†’ æ®µéšçš„æ©Ÿèƒ½æ‹¡å¼µ
- **æ‰‹å‹•æ”¯æ´**: å®Œå…¨è‡ªå‹•åŒ–ã‚’é¿ã‘ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹å‹•æ“ä½œã‚’æ”¯æ´
- **ãƒãƒ£ãƒ³ãƒãƒ«éä¾å­˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒãƒ£ãƒ³ãƒãƒ«ã‚’æ„è­˜ã•ã›ãªã„çµ±åˆä½“é¨“

---

## 2. è¦ä»¶åˆ†æ

### 2.1 æ©Ÿèƒ½è¦ä»¶

#### åŸºæœ¬æ©Ÿèƒ½ï¼ˆMust haveï¼‰
- **ãƒãƒ«ãƒãƒãƒ£ãƒãƒ«çµ±åˆ**: Gmail, Discord, Line ã®3ãƒãƒ£ãƒãƒ«ã‚’çµ±åˆ
- **è¿”ä¿¡æ¡ˆç”Ÿæˆ**: LLMï¼ˆOpenAIç­‰ï¼‰ã«ã‚ˆã‚‹è‡ªå‹•è¿”ä¿¡æ¡ˆç”Ÿæˆ
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿**: å¯¾è±¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + **ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®šæ™‚ã¯ä»–ãƒãƒ£ãƒ³ãƒãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚è¿½åŠ **
- **ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯é€ä¿¡å‰ã®ç·¨é›†UI
- **åŒä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘**: **æ‰‹å‹•è¨­å®šã«ã‚ˆã‚‹ç´ã¥ã‘ç®¡ç†**ï¼ˆCæ¡ˆæ¡ç”¨ï¼‰

#### ã‚µãƒ–æ©Ÿèƒ½ï¼ˆMust haveï¼‰
- **çµ±åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—**: å„ãƒãƒ£ãƒãƒ«ã‹ã‚‰ã®æœªèª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€æ‹¬å–å¾—
- **çµ±ä¸€è¿”ä¿¡UI**: **å…¨ãƒãƒ£ãƒ³ãƒãƒ«å…±é€šã®è¿”ä¿¡UI**
- **ç´ã¥ã‘ç®¡ç†UI**: **ç°¡å˜ãªç´ã¥ã‘è¨­å®šUI**
- **ä»–ãƒãƒ£ãƒ³ãƒãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º**: åŒä¸€äººç‰©ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ**1ä»¶**ï¼‰
- **LLMç”Ÿæˆæ™‚ã®ä»–ãƒãƒ£ãƒ³ãƒãƒ«å‚ç…§ã‚ªãƒ—ã‚·ãƒ§ãƒ³**

#### Could haveï¼ˆå°†æ¥å®Ÿè£…ï¼‰
- è¤‡æ•°ãƒãƒ£ãƒ³ãƒãƒ«åŒæ™‚è¡¨ç¤º
- è¿”ä¿¡å±¥æ­´ç®¡ç†
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
- ç´ã¥ã‘è‡ªå‹•åŒ–ãƒ»è£œåŠ©æ©Ÿèƒ½

### 2.2 éæ©Ÿèƒ½è¦ä»¶

#### æ€§èƒ½è¦ä»¶
| é …ç›® | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|----------|
| **UIå¿œç­”æ™‚é–“** | 200msä»¥å†… | Chrome DevTools |
| **LLMå¿œç­”æ™‚é–“** | 5ç§’ä»¥å†… | API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ¸¬å®š |
| **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ™‚é–“** | 3ç§’ä»¥å†… | End-to-Endæ¸¬å®š |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹** | 50msä»¥å†… | chrome.storage APIæ¸¬å®š |
| **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡** | 100MBä»¥å†… | Chrome Task Manager |

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- **Authentication**: OAuth 2.0ï¼ˆGmailï¼‰
- **Data Encryption**: ä¿å­˜ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–
- **HTTPS Only**: é€šä¿¡æš—å·åŒ–
- **Local Storage**: ãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿
- **No Telemetry**: ä½¿ç”¨çµ±è¨ˆé€ä¿¡ãªã—

---

## 3. æŠ€è¡“èª¿æŸ»çµæœ

### 3.1 å„ãƒãƒ£ãƒ³ãƒãƒ«ã®å®Ÿè£…å¯èƒ½æ€§

| ãƒãƒ£ãƒ³ãƒãƒ« | è©•ä¾¡ | æ¨å¥¨æ–¹å¼ | ä¸»è¦åˆ¶ç´„ | å®Ÿè£…å„ªå…ˆåº¦ |
|------------|------|----------|----------|------------|
| **Gmail** | Bï¼ˆå®Ÿè£…å¯èƒ½ï¼‰ | Gmail API v1 + OAuth 2.0 | ãƒ¬ãƒ¼ãƒˆåˆ¶é™250ã‚¯ã‚©ãƒ¼ã‚¿/ç§’ | **é«˜** |
| **Discord** | Cï¼ˆæ¡ä»¶ä»˜ãï¼‰ | Proxy Server + DOMæ“ä½œ | **å®Œå…¨è‡ªå‹•åŒ–ç¦æ­¢**ã€æ‰‹å‹•æ”¯æ´ã®ã¿ | **ä¸­** |
| **Line** | Bï¼ˆå®Ÿè£…å¯èƒ½ï¼‰ | Webhook Proxy Server | CORSåˆ¶é™ã€å¾“é‡èª²é‡‘ | **é«˜** |

### 3.2 æŠ€è¡“çš„åˆ¶ç´„

#### Discord ã®é‡è¦åˆ¶ç´„
- **2024å¹´7æœˆ8æ—¥æ›´æ–°**: Discordåˆ©ç”¨è¦ç´„ã§**å®Œå…¨è‡ªå‹•åŒ–ãŒæ˜ç¤ºçš„ã«ç¦æ­¢**
- **å®Ÿè£…å¯èƒ½ç¯„å›²**: **æ‰‹å‹•æ“ä½œæ”¯æ´ã®ã¿**ï¼ˆè¿”ä¿¡æ¡ˆè¡¨ç¤ºã€UIè£œåŠ©ãªã©ï¼‰
- **ç¦æ­¢äº‹é …**: è‡ªå‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã€å®Œå…¨è‡ªå‹•è¿”ä¿¡

#### Chromeæ‹¡å¼µæ©Ÿèƒ½åˆ¶ç´„
- **Manifest V3**: å¿…é ˆå¯¾å¿œ
- **Service Worker**: Background Scriptä»£æ›¿
- **CSPåˆ¶ç´„**: Content Security Policyåˆ¶é™
- **CORSåˆ¶é™**: å„ãƒãƒ£ãƒ³ãƒãƒ«ã§ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼å¿…è¦ï¼ˆLINEã®ã¿ï¼‰

### 3.3 å®Ÿéš›ã®é€šä¿¡ãƒ‘ã‚¹

| ãƒãƒ£ãƒ³ãƒãƒ« | é€šä¿¡æ–¹å¼ | ãƒ—ãƒ­ã‚­ã‚·å¿…è¦æ€§ | ç†ç”± |
|------------|----------|----------------|------|
| **Gmail** | âŒ ç›´æ¥æ¥ç¶š | ä¸è¦ | chrome.identity APIã§OAuthå¯¾å¿œæ¸ˆã¿ |
| **Discord** | âŒ ç›´æ¥æ¥ç¶š | ä¸è¦ | Webhook URLã¸ã®ç›´æ¥POSTå¯èƒ½ |
| **LINE** | âœ… ãƒ—ãƒ­ã‚­ã‚·çµŒç”± | **å¿…è¦** | CORSåˆ¶é™ã®ãŸã‚ |

---

## 4. è¨­è¨ˆæ–¹é‡

### 4.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### Chromeæ‹¡å¼µæ©Ÿèƒ½
```mermaid
graph TD
    subgraph "Chrome Extension Technology Stack"
        A[Manifest V3<br/>å¿…é ˆè¦ä»¶]
        B[TypeScript<br/>å‹å®‰å…¨æ€§]
        C[Service Worker<br/>Backgroundå‡¦ç†]
        D[Content Scripts<br/>UIçµ±åˆ]
        E[chrome.storage.local<br/>ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–]
        F[chrome.identity<br/>OAuthèªè¨¼]
    end
    
    subgraph "UI Framework"
        G[React<br/>çµ±ä¸€UI]
        H[Ant Design<br/>UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ]
        I[CSS Modules<br/>ã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†]
    end
    
    subgraph "Build & Testing Tools"
        J[Webpack<br/>ãƒãƒ³ãƒ‰ãƒ©ãƒ¼]
        K[Babel<br/>ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«]
        L[ESLint<br/>ã‚³ãƒ¼ãƒ‰å“è³ª]
        M[Vitest<br/>ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯]
        N[Testing Library<br/>UI ãƒ†ã‚¹ãƒˆ]
        O[Playwright<br/>E2E ãƒ†ã‚¹ãƒˆ]
    end
    
    A --> B
    B --> C
    B --> D
    B --> G
    G --> H
    B --> J
    B --> M
```

#### LINEå°‚ç”¨ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼
```mermaid
graph TD
    subgraph "Proxy Server Technology Stack"
        A[Node.js<br/>Runtime]
        B[Express.js<br/>Web Framework]
        C[TypeScript<br/>å‹å®‰å…¨æ€§]
        D[Railway<br/>ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°]
    end
    
    subgraph "Resilience Libraries"
        E[express-rate-limit<br/>Rate Limiting]
        F[opossum<br/>Circuit Breaker]
        G[axios<br/>HTTP Client]
        H[helmet<br/>Security]
    end
    
    A --> B
    B --> C
    B --> D
    C --> E
    C --> F
```

### 4.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | é©ç”¨ç®‡æ‰€ | ç†ç”± |
|----------|----------|------|
| **Repository Pattern** | ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ | chrome.storage.localâ†’DBç§»è¡Œã®å®¹æ˜“æ€§ |
| **Factory Pattern** | MessageClientç”Ÿæˆ | ãƒãƒ£ãƒ³ãƒãƒ«å›ºæœ‰å®Ÿè£…ã®æŠ½è±¡åŒ– |
| **Strategy Pattern** | LLM APIåˆ‡ã‚Šæ›¿ãˆ | è¤‡æ•°ã®LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ |
| **Observer Pattern** | UIçŠ¶æ…‹ç®¡ç† | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ UIæ›´æ–° |
| **Circuit Breaker** | å¤–éƒ¨APIå‘¼ã³å‡ºã— | è€éšœå®³æ€§ç¢ºä¿ |

### 4.3 é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºï¼ˆ4-6é€±é–“ï¼‰

```mermaid
graph TD
    subgraph "Phase 1: Foundation (Week 1-2)"
        A[Chrome ExtensionåŸºç›¤]
        B[çµ±ä¸€UIæ§‹ç¯‰]
        C[ãƒ‡ãƒ¼ã‚¿ç®¡ç†å±¤]
        D[è¨­å®šç®¡ç†]
    end
    
    subgraph "Phase 2: Core Integration (Week 3-4)"
        E[Gmail APIçµ±åˆ]
        F[Discord Webhookçµ±åˆ]
        G[LINE Proxyé–‹ç™º]
        H[LLM APIçµ±åˆ]
    end
    
    subgraph "Phase 3: Testing & Polish (Week 5-6)"
        I[çµ±åˆãƒ†ã‚¹ãƒˆ]
        J[E2E ãƒ†ã‚¹ãƒˆ]
        K[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–]
        L[ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„]
    end
```

---

## 5. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 5.1 å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆ4å±¤æ§‹æˆï¼‰

```mermaid
graph TD
    subgraph "User Interface Layer"
        A[Content Script UI<br/>React + Ant Design]
        B[çµ±ä¸€è¿”ä¿¡ãƒ¢ãƒ¼ãƒ€ãƒ«<br/>ç·¨é›†å¯èƒ½UI]
        C[ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘ç®¡ç†UI<br/>è¨­å®šç”»é¢]
    end
    
    subgraph "Application Service Layer"
        D[Reply Assistant Service<br/>è¿”ä¿¡æ”¯æ´ãƒ­ã‚¸ãƒƒã‚¯]
        E[User Mapping Service<br/>ç´ã¥ã‘ç®¡ç†]
        F[LLM Integration Service<br/>AIè¿”ä¿¡ç”Ÿæˆ]
        G[Settings Service<br/>è¨­å®šç®¡ç†]
    end
    
    subgraph "Channel Service Layer"
        H[Message Client Factory<br/>ãƒãƒ£ãƒ³ãƒãƒ«æŠ½è±¡åŒ–]
        I[Gmail Service<br/>Gmailå°‚ç”¨å‡¦ç†]
        J[Discord Service<br/>Discordå°‚ç”¨å‡¦ç†]
        K[Line Service<br/>Lineå°‚ç”¨å‡¦ç†]
        L[Message Sync Service<br/>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åŒæœŸ]
    end
    
    subgraph "Infrastructure Layer"
        M[Chrome Storage Repository<br/>ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–]
        N[Auth Token Manager<br/>èªè¨¼ç®¡ç†]
        O[Error Handler<br/>ã‚¨ãƒ©ãƒ¼å‡¦ç†]
        P[Background Tasks<br/>ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†]
    end
    
    A --> D
    B --> D
    C --> E
    D --> F
    D --> G
    E --> H
    F --> I
    G --> J
    H --> K
    I --> L
    J --> L
    K --> M
    L --> N
    M --> O
    N --> P
```

### 5.2 Chromeæ‹¡å¼µæ©Ÿèƒ½å†…éƒ¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TD
    subgraph "Content Script Context"
        A[Gmail Content Script<br/>gmail.com/*]
        B[Discord Content Script<br/>discord.com/*]
        C[Line Content Script<br/>line.me/*]
        D[çµ±ä¸€UI Component<br/>è¿”ä¿¡ãƒ¢ãƒ¼ãƒ€ãƒ«]
    end
    
    subgraph "Background Service Worker"
        E[Message Router<br/>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°]
        F[API Client Manager<br/>APIå‘¼ã³å‡ºã—ç®¡ç†]
        G[Auth Token Manager<br/>èªè¨¼æƒ…å ±ç®¡ç†]
        H[Storage Manager<br/>ãƒ‡ãƒ¼ã‚¿ç®¡ç†]
        I[Error Handler<br/>ã‚¨ãƒ©ãƒ¼å‡¦ç†]
    end
    
    subgraph "Storage Layer"
        N[chrome.storage.local<br/>è¨­å®šãƒ»èªè¨¼æƒ…å ±]
        O[User Mappings<br/>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘]
        P[Message History<br/>å±¥æ­´ãƒ‡ãƒ¼ã‚¿]
        Q[App Settings<br/>ã‚¢ãƒ—ãƒªè¨­å®š]
    end
    
    A --> E
    B --> E
    C --> E
    D --> E
    E --> F
    E --> G
    E --> H
    H --> N
    H --> O
    H --> P
    H --> Q
```

### 5.3 Channel Service Layer è©³ç´°

#### å„Channel Serviceã®è²¬å‹™

```mermaid
graph TD
    subgraph "Channel Service Layer"
        A[Message Client Factory<br/>ãƒãƒ£ãƒ³ãƒãƒ«æŠ½è±¡åŒ–]
        B[Gmail Service<br/>Gmailå°‚ç”¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯]
        C[Discord Service<br/>Discordå°‚ç”¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯]
        D[Line Service<br/>Lineå°‚ç”¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯]
        E[Message Sync Service<br/>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åŒæœŸç®¡ç†]
        F[Channel Auth Service<br/>ãƒãƒ£ãƒ³ãƒãƒ«èªè¨¼ç®¡ç†]
    end
    
    subgraph "å„Channel Serviceã®è²¬å‹™"
        G[Gmail Service<br/>ãƒ»OAuth 2.0èªè¨¼ãƒ•ãƒ­ãƒ¼<br/>ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—/é€ä¿¡<br/>ãƒ»Rate Limitingç®¡ç†<br/>ãƒ»Gmailå›ºæœ‰å½¢å¼å¤‰æ›]
        H[Discord Service<br/>ãƒ»Webhook URLç®¡ç†<br/>ãƒ»DOMç›£è¦–ãƒ»æ“ä½œ<br/>ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ”¯æ´<br/>ãƒ»Discordå›ºæœ‰å½¢å¼å¤‰æ›]
        I[Line Service<br/>ãƒ»Channel Tokenç®¡ç†<br/>ãƒ»Proxy Serveré€£æº<br/>ãƒ»Webhookå—ä¿¡å‡¦ç†<br/>ãƒ»Lineå›ºæœ‰å½¢å¼å¤‰æ›]
        J[Message Sync Service<br/>ãƒ»ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åŒæœŸ<br/>ãƒ»é‡è¤‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œå‡º<br/>ãƒ»å±¥æ­´ç®¡ç†<br/>ãƒ»çµ±ä¸€å½¢å¼å¤‰æ›]
        K[Channel Auth Service<br/>ãƒ»èªè¨¼çŠ¶æ…‹ç›£è¦–<br/>ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°<br/>ãƒ»æ¨©é™ç¢ºèª<br/>ãƒ»èªè¨¼ã‚¨ãƒ©ãƒ¼å‡¦ç†]
    end
    
    B --> G
    C --> H
    D --> I
    E --> J
    F --> K
```

### 5.4 LINEå°‚ç”¨ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TD
    subgraph "API Gateway Layer"
        A[Express.js Router<br/>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°]
        B[CORS Middleware<br/>CORSåˆ¶é™è§£é™¤]
        C[Rate Limiting<br/>ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶é™]
        D[Request Validation<br/>å…¥åŠ›æ¤œè¨¼]
    end
    
    subgraph "Business Logic Layer"
        E[LINE API Service<br/>APIå‘¼ã³å‡ºã—ãƒ­ã‚¸ãƒƒã‚¯]
        F[Error Handler<br/>ã‚¨ãƒ©ãƒ¼å‡¦ç†]
        G[Response Formatter<br/>ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ•´å½¢]
        H[Health Check<br/>æ­»æ´»ç›£è¦–]
    end
    
    subgraph "Infrastructure Layer"
        I[HTTP Client<br/>axios]
        J[Circuit Breaker<br/>opossum]
        K[Logger<br/>winston]
        L[Config Manager<br/>ç’°å¢ƒå¤‰æ•°]
    end
    
    A --> E
    B --> E
    C --> F
    D --> F
    E --> G
    F --> G
    G --> H
    E --> I
    F --> J
    G --> K
    H --> L
```

---

## 6. çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 6.1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«éä¾å­˜ï¼‰

```mermaid
graph TD
    subgraph "çµ±åˆè¿”ä¿¡ã‚µãƒãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"
        A[ç¢ºèªé–‹å§‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯<br/>â˜…ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯] --> B[å…¨ãƒãƒ£ãƒ³ãƒãƒ«æœªèª­å–å¾—é–‹å§‹<br/>ä¸¦åˆ—å‡¦ç†]
        B --> C[Gmailæœªèª­å–å¾—<br/>messages.list API]
        B --> D[Discordæœªèª­å–å¾—<br/>DOMè§£æ]
        B --> E[LINEæœªèª­å–å¾—<br/>ProxyçµŒç”±API]
        
        C --> F[çµ±åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆä½œæˆ]
        D --> F
        E --> F
        
        F --> G[ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªå‹•ç´ã¥ã‘å‡¦ç†<br/>åŒä¸€äººç‰©ã®ç‰¹å®š]
        G --> H[çµ±åˆå—ä¿¡ç®±è¡¨ç¤º<br/>ãƒãƒ£ãƒ³ãƒãƒ«æ¨ªæ–­ãƒ“ãƒ¥ãƒ¼]
        H --> I[è¿”ä¿¡å¯¾è±¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¸æŠ<br/>ã©ã®ãƒãƒ£ãƒ³ãƒãƒ«ã§ã‚‚åŒã˜UI]
        I --> J[é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è‡ªå‹•åé›†<br/>åŒä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä»–ãƒãƒ£ãƒ³ãƒãƒ«å±¥æ­´]
        J --> K[AIè¿”ä¿¡æ¡ˆè‡ªå‹•ç”Ÿæˆ<br/>å…¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå«ã‚€]
        K --> L[è¿”ä¿¡æ¡ˆè¡¨ç¤ºãƒ»ç·¨é›†<br/>é€ä¿¡ãƒãƒ£ãƒ³ãƒãƒ«ã¯è‡ªå‹•åˆ¤å®š]
        L --> M[é€ä¿¡å®Ÿè¡Œ<br/>é©åˆ‡ãªãƒãƒ£ãƒ³ãƒãƒ«APIè‡ªå‹•é¸æŠ]
    end
```

### 6.2 å…¨ãƒãƒ£ãƒ³ãƒãƒ«ä¸¦åˆ—å‡¦ç†

```mermaid
graph TD
    subgraph "å…¨ãƒãƒ£ãƒ³ãƒãƒ«ä¸¦åˆ—å‡¦ç†"
        A[ç¢ºèªé–‹å§‹ãƒˆãƒªã‚¬ãƒ¼] --> B[Channel Service Manager<br/>ä¸¦åˆ—å‡¦ç†ç®¡ç†]
        
        B --> C[Promise.allSettledå®Ÿè¡Œ]
        C --> D[Gmail Service<br/>getUnreadMessages]
        C --> E[Discord Service<br/>getCurrentMessages]
        C --> F[LINE Service<br/>getUnreadMessages]
        
        D --> G[Gmailçµæœ<br/>æˆåŠŸ/å¤±æ•—]
        E --> H[Discordçµæœ<br/>æˆåŠŸ/å¤±æ•—]
        F --> I[LINEçµæœ<br/>æˆåŠŸ/å¤±æ•—]
        
        G --> J[Message Aggregation Service<br/>çµæœçµ±åˆå‡¦ç†]
        H --> J
        I --> J
        
        J --> K[ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘è§£æ±º<br/>User Resolution Service]
        K --> L[çµ±åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆç”Ÿæˆ<br/>æ™‚ç³»åˆ—ã‚½ãƒ¼ãƒˆ]
        L --> M[çµ±åˆå—ä¿¡ç®±UIæ›´æ–°]
    end
```

### 6.3 çµ±åˆUIè¨­è¨ˆ

#### çµ±åˆå—ä¿¡ç®±ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çµ±åˆå—ä¿¡ç®±                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç¢ºèªé–‹å§‹] [è¨­å®š] [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘ç®¡ç†]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“§ ç”°ä¸­å¤ªéƒ <Gmail>        2åˆ†å‰                       â”‚
â”‚  ä»¶å: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦                             â”‚
â”‚  å†…å®¹: æ˜æ—¥ã®ä¼šè­°ã®ä»¶ã§...                [è¿”ä¿¡]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ tanaka_discord <Discord>   5åˆ†å‰                    â”‚
â”‚  ãƒãƒ£ãƒ³ãƒãƒ«: #general                                   â”‚
â”‚  å†…å®¹: ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã¯...      [è¿”ä¿¡]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“± ç”°ä¸­å¤ªéƒ <LINE>           10åˆ†å‰                    â”‚
â”‚  å†…å®¹: ãŠç–²ã‚Œã•ã¾ã§ã™ï¼       [è¿”ä¿¡]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### çµ±ä¸€è¿”ä¿¡ãƒ¢ãƒ¼ãƒ€ãƒ«
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¿”ä¿¡ä½œæˆ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿”ä¿¡å…ˆ: ç”°ä¸­å¤ªéƒ (Gmail)                               â”‚
â”‚  å…ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä»–ãƒãƒ£ãƒ³ãƒãƒ«ã®é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:                          â”‚
â”‚  â€¢ Discord: ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã¯... (5åˆ†å‰)                  â”‚
â”‚  â€¢ LINE: ãŠç–²ã‚Œã•ã¾ã§ã™ï¼ (10åˆ†å‰)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AIç”Ÿæˆè¿”ä¿¡æ¡ˆ:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ãŠç–²ã‚Œã•ã¾ã§ã™ã€‚                                   â”‚ â”‚
â”‚  â”‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä»¶ã€äº†è§£ã„ãŸã—ã¾ã—ãŸã€‚               â”‚ â”‚
â”‚  â”‚ æ˜æ—¥ã®ä¼šè­°ã§è©³ç´°ã‚’ç¢ºèªã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [AIå†ç”Ÿæˆ] [ç·¨é›†] [é€ä¿¡] [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. æŠ€è¡“ä»•æ§˜

### 7.1 çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©

#### åŸºæœ¬ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹
```typescript
// çµ±ä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
interface IMessageClient {
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
  sendMessage(params: SendMessageParams): Promise<SendMessageResult>;
  
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
  getMessages(params: GetMessagesParams): Promise<GetMessagesResult>;
  
  // èªè¨¼çŠ¶æ…‹ç¢ºèª
  isAuthenticated(): Promise<boolean>;
  
  // èªè¨¼å®Ÿè¡Œ
  authenticate(credentials?: any): Promise<AuthResult>;
  
  // ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±å–å¾—
  getChannelInfo(): ChannelInfo;
}

// é€ä¿¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
interface SendMessageParams {
  to: string;           // é€ä¿¡å…ˆID
  content: string;      // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹
  replyTo?: string;     // è¿”ä¿¡å¯¾è±¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
  options?: SendOptions;
}

// å–å¾—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
interface GetMessagesParams {
  limit?: number;       // å–å¾—ä»¶æ•°åˆ¶é™
  unreadOnly?: boolean; // æœªèª­ã®ã¿å–å¾—
  since?: Date;         // æŒ‡å®šæ—¥æ™‚ä»¥é™
  threadId?: string;    // ã‚¹ãƒ¬ãƒƒãƒ‰IDæŒ‡å®š
}

// é€ä¿¡ã‚ªãƒ—ã‚·ãƒ§ãƒ³
interface SendOptions {
  urgent?: boolean;     // ç·Šæ€¥ãƒ•ãƒ©ã‚°
  silent?: boolean;     // é€šçŸ¥ç„¡åŠ¹åŒ–
  formatting?: MessageFormat; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼
}

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼
enum MessageFormat {
  PLAIN_TEXT = 'plain',
  MARKDOWN = 'markdown',
  HTML = 'html'
}

// çµ±ä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼
interface Message {
  id: string;
  from: string;
  to: string;
  content: string;
  timestamp: Date;
  isUnread: boolean;
  channel: ChannelType;
  threadId?: string;    // ã‚¹ãƒ¬ãƒƒãƒ‰/ä¼šè©±ID
  replyToId?: string;   // è¿”ä¿¡å…ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
  attachments?: Attachment[]; // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
  raw?: any; // å„ãƒãƒ£ãƒ³ãƒãƒ«å›ºæœ‰ã®ç”Ÿãƒ‡ãƒ¼ã‚¿
}

// æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
interface Attachment {
  id: string;
  name: string;
  type: string;
  size: number;
  url?: string;
}

// APIçµæœå‹
interface SendMessageResult {
  success: boolean;
  messageId?: string;
  error?: ApiError;
}

interface GetMessagesResult {
  success: boolean;
  messages: Message[];
  hasMore: boolean;
  nextToken?: string;
  error?: ApiError;
}

interface AuthResult {
  success: boolean;
  token?: string;
  expiresAt?: Date;
  error?: ApiError;
}

// ã‚¨ãƒ©ãƒ¼å‹
interface ApiError {
  code: string;
  message: string;
  details?: any;
}

// ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±
interface ChannelInfo {
  type: ChannelType;
  name: string;
  isConnected: boolean;
  lastSync?: Date;
  rateLimits?: RateLimit;
}

interface RateLimit {
  requestsPerSecond: number;
  requestsPerHour: number;
  remaining: number;
  resetAt: Date;
}
```

#### Application Service ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹
```typescript
// è¿”ä¿¡æ”¯æ´ã‚µãƒ¼ãƒ“ã‚¹
interface IReplyAssistantService {
  // å…¨ãƒãƒ£ãƒ³ãƒãƒ«æœªèª­å–å¾—
  fetchAllUnreadMessages(): Promise<UnifiedInboxResult>;
  
  // AIè¿”ä¿¡æ¡ˆç”Ÿæˆ
  generateReply(context: ReplyContext): Promise<ReplyGenerationResult>;
  
  // é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
  getRelatedMessages(userId: string, originalMessage: Message): Promise<Message[]>;
}

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘ã‚µãƒ¼ãƒ“ã‚¹
interface IUserMappingService {
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘ä½œæˆ
  createMapping(mapping: UserMappingRequest): Promise<UserMapping>;
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘å–å¾—
  getMapping(userId: string): Promise<UserMapping | null>;
  
  // è‡ªå‹•ç´ã¥ã‘è§£æ±º
  resolveUserMappings(messages: Message[]): Promise<ResolvedMessage[]>;
  
  // ç´ã¥ã‘ä¸€è¦§å–å¾—
  getAllMappings(): Promise<UserMapping[]>;
}

// LLMçµ±åˆã‚µãƒ¼ãƒ“ã‚¹
interface ILLMIntegrationService {
  // è¿”ä¿¡ç”Ÿæˆ
  generateReply(prompt: string, context: any): Promise<string>;
  
  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–
  optimizePrompt(context: ReplyContext): string;
  
  // ä½¿ç”¨é‡å–å¾—
  getUsageStats(): Promise<LLMUsageStats>;
}

// è¨­å®šã‚µãƒ¼ãƒ“ã‚¹
interface ISettingsService {
  // è¨­å®šå–å¾—
  getSettings(): Promise<AppSettings>;
  
  // è¨­å®šæ›´æ–°
  updateSettings(settings: Partial<AppSettings>): Promise<void>;
  
  // è¨­å®šãƒªã‚»ãƒƒãƒˆ
  resetSettings(): Promise<void>;
}
```

#### Repository ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹
```typescript
// ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒªãƒã‚¸ãƒˆãƒª
interface IChromeStorageRepository {
  // ãƒ‡ãƒ¼ã‚¿ä¿å­˜
  save<T>(key: string, data: T): Promise<void>;
  
  // ãƒ‡ãƒ¼ã‚¿å–å¾—
  get<T>(key: string): Promise<T | null>;
  
  // ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
  remove(key: string): Promise<void>;
  
  // å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—
  getAll(): Promise<Record<string, any>>;
  
  // ãƒ‡ãƒ¼ã‚¿å­˜åœ¨ç¢ºèª
  exists(key: string): Promise<boolean>;
}

// èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†
interface IAuthTokenManager {
  // ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜
  saveToken(channel: ChannelType, token: AuthToken): Promise<void>;
  
  // ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
  getToken(channel: ChannelType): Promise<AuthToken | null>;
  
  // ãƒˆãƒ¼ã‚¯ãƒ³å‰Šé™¤
  removeToken(channel: ChannelType): Promise<void>;
  
  // ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°
  refreshToken(channel: ChannelType): Promise<AuthToken>;
  
  // æœ‰åŠ¹æ€§ç¢ºèª
  validateToken(channel: ChannelType, token: AuthToken): Promise<boolean>;
}
```

### 7.2 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

#### åŸºæœ¬å‹å®šç¾©
```typescript
enum ChannelType {
  GMAIL = 'gmail',
  DISCORD = 'discord',
  LINE = 'line'
}

enum MessageStatus {
  UNREAD = 'unread',
  READ = 'read',
  REPLIED = 'replied',
  ARCHIVED = 'archived'
}

enum Priority {
  LOW = 'low',
  NORMAL = 'normal',
  HIGH = 'high',
  URGENT = 'urgent'
}
```

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
```typescript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘æƒ…å ±
interface UserMapping {
  id: string; // UUID
  name: string; // è¡¨ç¤ºå
  channels: {
    [ChannelType.GMAIL]?: {
      email: string;
      userId: string;
      displayName?: string;
    };
    [ChannelType.DISCORD]?: {
      username: string;
      userId: string;
      discriminator?: string;
      guildId?: string;
      displayName?: string;
    };
    [ChannelType.LINE]?: {
      displayName: string;
      userId: string;
      pictureUrl?: string;
    };
  };
  avatar?: string; // çµ±ä¸€ã‚¢ãƒã‚¿ãƒ¼URL
  priority: Priority; // ãƒ¦ãƒ¼ã‚¶ãƒ¼é‡è¦åº¦
  tags: string[]; // ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°
  lastActivity: Date; // æœ€çµ‚æ´»å‹•æ—¥æ™‚
  isActive: boolean; // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹
  createdAt: Date;
  updatedAt: Date;
}

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘è¦æ±‚
interface UserMappingRequest {
  name: string;
  channels: Partial<UserMapping['channels']>;
  avatar?: string;
  priority?: Priority;
  tags?: string[];
}

// è§£æ±ºæ¸ˆã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘é©ç”¨å¾Œï¼‰
interface ResolvedMessage extends Message {
  resolvedUser?: UserMapping; // ç´ã¥ã‘è§£æ±ºã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼
  relatedMessages?: Message[]; // é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  priority: Priority; // è¨ˆç®—ã•ã‚ŒãŸå„ªå…ˆåº¦
}
```

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
```typescript
// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
interface AppSettings {
  // ä¸€èˆ¬è¨­å®š
  general: {
    language: string; // è¨€èªè¨­å®š
    theme: 'light' | 'dark' | 'auto'; // ãƒ†ãƒ¼ãƒ
    autoFetch: boolean; // è‡ªå‹•å–å¾—æœ‰åŠ¹
    fetchInterval: number; // å–å¾—é–“éš”ï¼ˆåˆ†ï¼‰
    maxMessageHistory: number; // å±¥æ­´ä¿æŒä»¶æ•°
  };
  
  // é€šçŸ¥è¨­å®š
  notifications: {
    enabled: boolean; // é€šçŸ¥æœ‰åŠ¹
    sound: boolean; // éŸ³å£°é€šçŸ¥
    desktop: boolean; // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥
    priorities: Priority[]; // é€šçŸ¥å¯¾è±¡å„ªå…ˆåº¦
  };
  
  // AIè¨­å®š
  ai: {
    provider: 'openai' | 'anthropic' | 'google'; // ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
    model: string; // ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«
    temperature: number; // å‰µé€ æ€§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    maxTokens: number; // æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°
    customPrompt?: string; // ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
  };
  
  // ãƒãƒ£ãƒ³ãƒãƒ«è¨­å®š
  channels: {
    [ChannelType.GMAIL]: GmailSettings;
    [ChannelType.DISCORD]: DiscordSettings;
    [ChannelType.LINE]: LineSettings;
  };
  
  // UIè¨­å®š
  ui: {
    compactMode: boolean; // ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆè¡¨ç¤º
    showAvatars: boolean; // ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤º
    groupByUser: boolean; // ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
    defaultSortOrder: 'timestamp' | 'priority' | 'channel'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚½ãƒ¼ãƒˆ
  };
}

// ãƒãƒ£ãƒ³ãƒãƒ«åˆ¥è¨­å®š
interface GmailSettings {
  enabled: boolean;
  labels?: string[]; // å¯¾è±¡ãƒ©ãƒ™ãƒ«
  excludeLabels?: string[]; // é™¤å¤–ãƒ©ãƒ™ãƒ«
  maxResults: number; // æœ€å¤§å–å¾—ä»¶æ•°
}

interface DiscordSettings {
  enabled: boolean;
  webhookUrl?: string;
  guildIds?: string[]; // å¯¾è±¡ã‚µãƒ¼ãƒãƒ¼
  channelIds?: string[]; // å¯¾è±¡ãƒãƒ£ãƒ³ãƒãƒ«
}

interface LineSettings {
  enabled: boolean;
  channelAccessToken?: string;
  proxyUrl: string; // ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼URL
}
```

#### èªè¨¼é–¢é€£ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
```typescript
// èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³
interface AuthToken {
  accessToken: string;
  refreshToken?: string;
  expiresAt: Date;
  scope?: string[];
  tokenType: 'Bearer' | 'OAuth';
}

// èªè¨¼çŠ¶æ…‹
interface AuthState {
  channel: ChannelType;
  isAuthenticated: boolean;
  user?: {
    id: string;
    email?: string;
    name?: string;
    avatar?: string;
  };
  lastAuth: Date;
  expiresAt?: Date;
}
```

#### çµ±åˆå—ä¿¡ç®±ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
```typescript
// çµ±åˆå—ä¿¡ç®±çµæœ
interface UnifiedInboxResult {
  success: boolean;
  messages: ResolvedMessage[];
  channelResults: {
    [ChannelType.GMAIL]: ChannelFetchResult;
    [ChannelType.DISCORD]: ChannelFetchResult;
    [ChannelType.LINE]: ChannelFetchResult;
  };
  totalUnread: number;
  lastFetch: Date;
  error?: ApiError;
}

// ãƒãƒ£ãƒ³ãƒãƒ«åˆ¥å–å¾—çµæœ
interface ChannelFetchResult {
  success: boolean;
  messageCount: number;
  error?: ApiError;
  fetchTime: number; // ãƒŸãƒªç§’
}

// è¿”ä¿¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
interface ReplyContext {
  originalMessage: Message;
  relatedMessages: Message[];
  userMapping?: UserMapping;
  conversationHistory: Message[];
  userPreferences: {
    tone: 'formal' | 'casual' | 'friendly';
    language: string;
    includeContext: boolean;
  };
}

// è¿”ä¿¡ç”Ÿæˆçµæœ
interface ReplyGenerationResult {
  success: boolean;
  reply: string;
  confidence: number; // 0-1ã®ä¿¡é ¼åº¦
  alternatives?: string[]; // ä»£æ›¿æ¡ˆ
  tokensUsed: number;
  error?: ApiError;
}

// LLMä½¿ç”¨çµ±è¨ˆ
interface LLMUsageStats {
  totalRequests: number;
  totalTokens: number;
  successRate: number;
  averageResponseTime: number;
  monthlyCost: number;
  lastUpdated: Date;
}
```

#### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼å®šç¾©
```typescript
// ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼å®šæ•°
const STORAGE_KEYS = {
  // èªè¨¼é–¢é€£
  AUTH_TOKENS: 'auth_tokens',
  AUTH_STATE: 'auth_state',
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
  USER_MAPPINGS: 'user_mappings',
  MESSAGE_HISTORY: 'message_history',
  
  // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
  APP_SETTINGS: 'app_settings',
  UI_STATE: 'ui_state',
  
  // çµ±è¨ˆãƒ»ãƒ­ã‚°
  USAGE_STATS: 'usage_stats',
  ERROR_LOG: 'error_log',
} as const;

type StorageKey = typeof STORAGE_KEYS[keyof typeof STORAGE_KEYS];
```

### 7.3 APIå‘¼ã³å‡ºã—é »åº¦ã¨ã‚³ã‚¹ãƒˆ

| ãƒãƒ£ãƒ³ãƒãƒ« | APIå‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚° | é »åº¦ | æœˆé–“ã‚³ã‚¹ãƒˆè¦‹ç© |
|------------|---------------------|------|---------------|
| **Gmail** | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚æ™‚ã®ã¿ | 1-10å›/æ—¥ | $0ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| **Discord** | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚æ™‚ã®ã¿ | 1-10å›/æ—¥ | $0ï¼ˆWebhookç„¡æ–™ï¼‰ |
| **LINE** | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚æ™‚ã®ã¿ | 1-10å›/æ—¥ | $1-5/æœˆ |
| **LLM** | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚æ™‚ã®ã¿ | 1-5å›/æ—¥ | $5-20/æœˆ |
| **Proxy** | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚æ™‚ã®ã¿ | 1-10å›/æ—¥ | $0-2/æœˆ |
| **åˆè¨ˆ** | - | - | **$6-27/æœˆ** |

### 7.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

#### èªè¨¼ãƒ»èªå¯
- **Gmail**: OAuth 2.0 + chrome.identity API
- **Discord**: Webhook URLç®¡ç†
- **LINE**: Channel Access Token + ãƒ—ãƒ­ã‚­ã‚·çµŒç”±

#### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- **Local Storage Only**: ãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿
- **æš—å·åŒ–**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®æš—å·åŒ–ä¿å­˜
- **HTTPS**: å…¨é€šä¿¡ã®æš—å·åŒ–
- **æœ€å°æ¨©é™**: å¿…è¦æœ€å°é™ã®æ¨©é™ã®ã¿è¦æ±‚

---

## 8. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆè¨­è¨ˆ

### 8.1 å…¨ä½“ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
multi-channel-reply-assistant/
â”œâ”€â”€ README.md                           # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
â”œâ”€â”€ package.json                        # NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®š
â”œâ”€â”€ tsconfig.json                       # TypeScriptè¨­å®š
â”œâ”€â”€ .gitignore                          # Gité™¤å¤–è¨­å®š
â”œâ”€â”€ .env.example                        # ç’°å¢ƒå¤‰æ•°ä¾‹
â”‚
â”œâ”€â”€ chrome-extension/                   # Chromeæ‹¡å¼µæ©Ÿèƒ½
â”‚   â”œâ”€â”€ manifest.json                   # æ‹¡å¼µæ©Ÿèƒ½ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ package.json                    # æ‹¡å¼µæ©Ÿèƒ½ç”¨ä¾å­˜é–¢ä¿‚
â”‚   â”œâ”€â”€ webpack.config.js               # ãƒ“ãƒ«ãƒ‰è¨­å®š
â”‚   â”œâ”€â”€ tsconfig.json                   # æ‹¡å¼µæ©Ÿèƒ½ç”¨TypeScriptè¨­å®š
â”‚   â”‚
â”‚   â”œâ”€â”€ src/                           # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ background/                # Background Service Worker
â”‚   â”‚   â”œâ”€â”€ content-scripts/           # Content Scripts
â”‚   â”‚   â”œâ”€â”€ components/                # React Components
â”‚   â”‚   â”œâ”€â”€ services/                  # Business Logic Services
â”‚   â”‚   â”œâ”€â”€ repositories/              # Data Access Layer
â”‚   â”‚   â”œâ”€â”€ types/                     # TypeScriptå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ utils/                     # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ assets/                    # é™çš„ãƒªã‚½ãƒ¼ã‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ public/                        # å…¬é–‹ãƒªã‚½ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ icons/                     # ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ _locales/                  # å¤šè¨€èªãƒªã‚½ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ popup.html                 # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—HTML
â”‚   â”‚
â”‚   â””â”€â”€ dist/                          # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”‚
â”œâ”€â”€ line-proxy-server/                 # LINEå°‚ç”¨ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ package.json                   # ã‚µãƒ¼ãƒãƒ¼ç”¨ä¾å­˜é–¢ä¿‚
â”‚   â”œâ”€â”€ tsconfig.json                  # ã‚µãƒ¼ãƒãƒ¼ç”¨TypeScriptè¨­å®š
â”‚   â”œâ”€â”€ Dockerfile                     # Dockerè¨­å®š
â”‚   â”œâ”€â”€ railway.json                   # Railwayè¨­å®š
â”‚   â”‚
â”‚   â”œâ”€â”€ src/                          # ã‚µãƒ¼ãƒãƒ¼ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ routes/                   # API ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ middleware/               # Express ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”‚   â”œâ”€â”€ services/                 # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ types/                    # å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ app.ts                    # Express ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚
â”‚   â””â”€â”€ dist/                         # ã‚µãƒ¼ãƒãƒ¼ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”‚
â”œâ”€â”€ shared/                           # å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”œâ”€â”€ types/                        # å…±é€šå‹å®šç¾©
â”‚   â”œâ”€â”€ constants/                    # å®šæ•°å®šç¾©
â”‚   â””â”€â”€ utils/                        # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚
â”œâ”€â”€ tests/                            # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ unit/                         # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ integration/                  # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ e2e/                          # E2Eãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ mocks/                        # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
â”‚
â””â”€â”€ docs/                             # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ design/                       # è¨­è¨ˆæ–‡æ›¸
    â”œâ”€â”€ api/                          # APIä»•æ§˜æ›¸
    â””â”€â”€ development/                  # é–‹ç™ºã‚¬ã‚¤ãƒ‰
```

### 8.2 Chromeæ‹¡å¼µæ©Ÿèƒ½è©³ç´°æ§‹æˆ

#### 8.2.1 manifest.json æ§‹é€ 
```json
{
  "manifest_version": 3,
  "name": "Multi-Channel Reply Assistant",
  "version": "1.0.0",
  "description": "AI-powered unified reply assistant for Gmail, Discord, and LINE",
  
  "permissions": [
    "storage",
    "identity",
    "activeTab",
    "https://gmail.com/*",
    "https://discord.com/*",
    "https://line.me/*"
  ],
  
  "background": {
    "service_worker": "dist/background/service-worker.js"
  },
  
  "content_scripts": [
    {
      "matches": ["https://mail.google.com/*"],
      "js": ["dist/content-scripts/gmail.js"],
      "css": ["dist/content-scripts/gmail.css"]
    },
    {
      "matches": ["https://discord.com/*"],
      "js": ["dist/content-scripts/discord.js"],
      "css": ["dist/content-scripts/discord.css"]
    },
    {
      "matches": ["https://line.me/*"],
      "js": ["dist/content-scripts/line.js"],
      "css": ["dist/content-scripts/line.css"]
    }
  ],
  
  "action": {
    "default_popup": "popup.html",
    "default_icon": {
      "16": "icons/icon16.png",
      "32": "icons/icon32.png",
      "48": "icons/icon48.png",
      "128": "icons/icon128.png"
    }
  }
}
```

#### 8.2.2 ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ§‹æˆ

##### Background Service Worker
```
src/background/
â”œâ”€â”€ service-worker.ts                  # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼
â”œâ”€â”€ message-router.ts                  # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”œâ”€â”€ auth-manager.ts                    # èªè¨¼ç®¡ç†
â”œâ”€â”€ storage-manager.ts                 # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†
â””â”€â”€ error-handler.ts                   # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```

##### Content Scripts
```
src/content-scripts/
â”œâ”€â”€ base/                             # å…±é€šãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ base-content-script.ts        # åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ ui-injector.ts                # UIæ³¨å…¥æ©Ÿèƒ½
â”‚   â””â”€â”€ dom-observer.ts               # DOMç›£è¦–æ©Ÿèƒ½
â”‚
â”œâ”€â”€ gmail/                            # Gmailå°‚ç”¨
â”‚   â”œâ”€â”€ gmail-content-script.ts       # Gmail Content Script
â”‚   â”œâ”€â”€ gmail-dom-parser.ts           # Gmail DOMè§£æ
â”‚   â””â”€â”€ gmail-ui-integration.ts       # Gmail UIçµ±åˆ
â”‚
â”œâ”€â”€ discord/                          # Discordå°‚ç”¨
â”‚   â”œâ”€â”€ discord-content-script.ts     # Discord Content Script
â”‚   â”œâ”€â”€ discord-dom-parser.ts         # Discord DOMè§£æ
â”‚   â””â”€â”€ discord-ui-integration.ts     # Discord UIçµ±åˆ
â”‚
â””â”€â”€ line/                             # LINEå°‚ç”¨
    â”œâ”€â”€ line-content-script.ts        # LINE Content Script
    â”œâ”€â”€ line-dom-parser.ts            # LINE DOMè§£æ
    â””â”€â”€ line-ui-integration.ts        # LINE UIçµ±åˆ
```

##### React Components
```
src/components/
â”œâ”€â”€ common/                           # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Button.types.ts
â”‚   â”‚   â””â”€â”€ Button.styles.css
â”‚   â”œâ”€â”€ Modal/
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.types.ts
â”‚   â”‚   â””â”€â”€ Modal.styles.css
â”‚   â””â”€â”€ LoadingSpinner/
â”‚       â”œâ”€â”€ LoadingSpinner.tsx
â”‚       â””â”€â”€ LoadingSpinner.styles.css
â”‚
â”œâ”€â”€ inbox/                           # å—ä¿¡ç®±é–¢é€£
â”‚   â”œâ”€â”€ UnifiedInbox/
â”‚   â”‚   â”œâ”€â”€ UnifiedInbox.tsx         # çµ±åˆå—ä¿¡ç®±
â”‚   â”‚   â”œâ”€â”€ UnifiedInbox.types.ts
â”‚   â”‚   â””â”€â”€ UnifiedInbox.styles.css
â”‚   â”œâ”€â”€ MessageCard/
â”‚   â”‚   â”œâ”€â”€ MessageCard.tsx          # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ MessageCard.types.ts
â”‚   â”‚   â””â”€â”€ MessageCard.styles.css
â”‚   â””â”€â”€ ChannelIndicator/
â”‚       â”œâ”€â”€ ChannelIndicator.tsx     # ãƒãƒ£ãƒ³ãƒãƒ«è¡¨ç¤º
â”‚       â””â”€â”€ ChannelIndicator.styles.css
â”‚
â”œâ”€â”€ reply/                           # è¿”ä¿¡é–¢é€£
â”‚   â”œâ”€â”€ ReplyModal/
â”‚   â”‚   â”œâ”€â”€ ReplyModal.tsx           # è¿”ä¿¡ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â”œâ”€â”€ ReplyModal.types.ts
â”‚   â”‚   â””â”€â”€ ReplyModal.styles.css
â”‚   â”œâ”€â”€ ReplyEditor/
â”‚   â”‚   â”œâ”€â”€ ReplyEditor.tsx          # è¿”ä¿¡ã‚¨ãƒ‡ã‚£ã‚¿
â”‚   â”‚   â””â”€â”€ ReplyEditor.styles.css
â”‚   â””â”€â”€ ContextPanel/
â”‚       â”œâ”€â”€ ContextPanel.tsx         # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ‘ãƒãƒ«
â”‚       â””â”€â”€ ContextPanel.styles.css
â”‚
â”œâ”€â”€ settings/                        # è¨­å®šé–¢é€£
â”‚   â”œâ”€â”€ SettingsModal/
â”‚   â”‚   â”œâ”€â”€ SettingsModal.tsx        # è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â””â”€â”€ SettingsModal.styles.css
â”‚   â”œâ”€â”€ ChannelSettings/
â”‚   â”‚   â”œâ”€â”€ ChannelSettings.tsx      # ãƒãƒ£ãƒ³ãƒãƒ«è¨­å®š
â”‚   â”‚   â””â”€â”€ ChannelSettings.styles.css
â”‚   â””â”€â”€ UserMappingManager/
â”‚       â”œâ”€â”€ UserMappingManager.tsx   # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘ç®¡ç†
â”‚       â””â”€â”€ UserMappingManager.styles.css
â”‚
â””â”€â”€ popup/                           # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
    â”œâ”€â”€ PopupApp.tsx                 # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª
    â”œâ”€â”€ QuickStats.tsx               # ã‚¯ã‚¤ãƒƒã‚¯çµ±è¨ˆè¡¨ç¤º
    â””â”€â”€ ActionButtons.tsx            # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ç¾¤
```

##### Service Layer
```
src/services/
â”œâ”€â”€ application/                     # Application Service Layer
â”‚   â”œâ”€â”€ reply-assistant.service.ts   # è¿”ä¿¡æ”¯æ´ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ user-mapping.service.ts      # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ llm-integration.service.ts   # LLMçµ±åˆã‚µãƒ¼ãƒ“ã‚¹
â”‚   â””â”€â”€ settings.service.ts          # è¨­å®šã‚µãƒ¼ãƒ“ã‚¹
â”‚
â”œâ”€â”€ channel/                         # Channel Service Layer
â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â”œâ”€â”€ message-client.interface.ts # çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ base-message-client.ts      # åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â””â”€â”€ message-client.factory.ts   # ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼
â”‚   â”œâ”€â”€ gmail/
â”‚   â”‚   â”œâ”€â”€ gmail.service.ts             # Gmail ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ gmail-auth.service.ts        # Gmail èªè¨¼
â”‚   â”‚   â””â”€â”€ gmail-api.client.ts          # Gmail API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ discord/
â”‚   â”‚   â”œâ”€â”€ discord.service.ts           # Discord ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ discord-webhook.client.ts    # Discord Webhook
â”‚   â”‚   â””â”€â”€ discord-dom.service.ts       # Discord DOMæ“ä½œ
â”‚   â””â”€â”€ line/
â”‚       â”œâ”€â”€ line.service.ts              # LINE ã‚µãƒ¼ãƒ“ã‚¹
â”‚       â”œâ”€â”€ line-proxy.client.ts         # LINE Proxy ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â””â”€â”€ line-webhook.service.ts      # LINE Webhook
â”‚
â””â”€â”€ infrastructure/                  # Infrastructure Layer
    â”œâ”€â”€ chrome-storage.repository.ts  # Chrome Storage Repository
    â”œâ”€â”€ auth-token.manager.ts          # èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†
    â”œâ”€â”€ error-handler.service.ts       # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    â””â”€â”€ background-tasks.manager.ts    # ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯
```

##### TypeScriptå‹å®šç¾©
```
src/types/
â”œâ”€â”€ core/                           # æ ¸ã¨ãªã‚‹å‹å®šç¾©
â”‚   â”œâ”€â”€ message.types.ts            # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é–¢é€£å‹
â”‚   â”œâ”€â”€ channel.types.ts            # ãƒãƒ£ãƒ³ãƒãƒ«é–¢é€£å‹
â”‚   â”œâ”€â”€ user.types.ts               # ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£å‹
â”‚   â””â”€â”€ api.types.ts                # APIé–¢é€£å‹
â”‚
â”œâ”€â”€ services/                       # ã‚µãƒ¼ãƒ“ã‚¹å±¤å‹å®šç¾©
â”‚   â”œâ”€â”€ reply-assistant.types.ts    # è¿”ä¿¡æ”¯æ´å‹
â”‚   â”œâ”€â”€ user-mapping.types.ts       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ã¥ã‘å‹
â”‚   â”œâ”€â”€ llm.types.ts                # LLMé–¢é€£å‹
â”‚   â””â”€â”€ settings.types.ts           # è¨­å®šå‹
â”‚
â”œâ”€â”€ infrastructure/                 # ã‚¤ãƒ³ãƒ•ãƒ©å±¤å‹å®šç¾©
â”‚   â”œâ”€â”€ storage.types.ts            # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‹
â”‚   â”œâ”€â”€ auth.types.ts               # èªè¨¼å‹
â”‚   â””â”€â”€ error.types.ts              # ã‚¨ãƒ©ãƒ¼å‹
â”‚
â””â”€â”€ external/                       # å¤–éƒ¨APIå‹å®šç¾©
    â”œâ”€â”€ gmail-api.types.ts          # Gmail APIå‹
    â”œâ”€â”€ discord-api.types.ts        # Discord APIå‹
    â””â”€â”€ line-api.types.ts           # LINE APIå‹
```

### 8.3 LINE Proxy Server æ§‹æˆ

```
line-proxy-server/src/
â”œâ”€â”€ app.ts                          # Express ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”œâ”€â”€ server.ts                       # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ routes/                         # API ãƒ«ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ index.ts                    # ãƒ«ãƒ¼ãƒˆçµ±åˆ
â”‚   â”œâ”€â”€ line-api.routes.ts          # LINE API ãƒ—ãƒ­ã‚­ã‚·ãƒ«ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ health.routes.ts            # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
â”‚   â””â”€â”€ webhook.routes.ts           # Webhookå—ä¿¡
â”‚
â”œâ”€â”€ middleware/                     # Express ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”œâ”€â”€ cors.middleware.ts          # CORSè¨­å®š
â”‚   â”œâ”€â”€ rate-limit.middleware.ts    # ãƒ¬ãƒ¼ãƒˆåˆ¶é™
â”‚   â”œâ”€â”€ validation.middleware.ts    # ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¤œè¨¼
â”‚   â”œâ”€â”€ auth.middleware.ts          # èªè¨¼ç¢ºèª
â”‚   â””â”€â”€ error.middleware.ts         # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”‚
â”œâ”€â”€ services/                       # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ line-api.service.ts         # LINE API ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ circuit-breaker.service.ts  # ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼
â”‚   â”œâ”€â”€ health-check.service.ts     # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
â”‚   â””â”€â”€ webhook.service.ts          # Webhookå‡¦ç†
â”‚
â”œâ”€â”€ types/                          # å‹å®šç¾©
â”‚   â”œâ”€â”€ line.types.ts               # LINEé–¢é€£å‹
â”‚   â”œâ”€â”€ api.types.ts                # APIå‹
â”‚   â””â”€â”€ config.types.ts             # è¨­å®šå‹
â”‚
â”œâ”€â”€ utils/                          # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ logger.ts                   # ãƒ­ã‚°æ©Ÿèƒ½
â”‚   â”œâ”€â”€ config.ts                   # è¨­å®šç®¡ç†
â”‚   â””â”€â”€ validation.ts               # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚
â””â”€â”€ config/                         # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ database.ts                 # DBè¨­å®šï¼ˆå°†æ¥ç”¨ï¼‰
    â”œâ”€â”€ redis.ts                    # Redisè¨­å®šï¼ˆå°†æ¥ç”¨ï¼‰
    â””â”€â”€ constants.ts                # å®šæ•°å®šç¾©
```

### 8.4 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é¡

#### 8.4.1 TypeScriptè¨­å®š
```json
// chrome-extension/tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "node",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "outDir": "./dist",
    "baseUrl": "./src",
    "paths": {
      "@/*": ["*"],
      "@/components/*": ["components/*"],
      "@/services/*": ["services/*"],
      "@/types/*": ["types/*"],
      "@/utils/*": ["utils/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

#### 8.4.2 ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ
```json
// chrome-extension/package.json
{
  "name": "multi-channel-reply-assistant",
  "version": "1.0.0",
  "description": "AI-powered unified reply assistant",
  "scripts": {
    "build": "webpack --mode production",
    "dev": "webpack --mode development --watch",
    "test": "vitest run",
    "test:watch": "vitest",
    "lint": "eslint src/**/*.{ts,tsx}",
    "type-check": "tsc --noEmit"
  },
  "devDependencies": {
    "@types/chrome": "^0.0.246",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "typescript": "^5.0.0",
    "webpack": "^5.0.0",
    "webpack-cli": "^5.0.0",
    "vitest": "^1.0.0"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "antd": "^5.0.0"
  }
}
```

### 8.5 ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

#### 8.5.1 TypeScript ãƒ•ã‚¡ã‚¤ãƒ«
- **Component**: `PascalCase.tsx` (ä¾‹: `ReplyModal.tsx`)
- **Service**: `kebab-case.service.ts` (ä¾‹: `reply-assistant.service.ts`)
- **Types**: `kebab-case.types.ts` (ä¾‹: `message.types.ts`)
- **Utils**: `kebab-case.ts` (ä¾‹: `date-formatter.ts`)
- **Constants**: `UPPER_SNAKE_CASE.ts` (ä¾‹: `API_ENDPOINTS.ts`)

#### 8.5.2 CSS ãƒ•ã‚¡ã‚¤ãƒ«
- **Component Style**: `ComponentName.styles.css`
- **Global Style**: `global.css`, `variables.css`

#### 8.5.3 Test ãƒ•ã‚¡ã‚¤ãƒ«
- **Unit Test**: `*.test.ts` (ä¾‹: `reply-assistant.service.test.ts`)
- **Integration Test**: `*.integration.test.ts`
- **E2E Test**: `*.e2e.test.ts`

### 8.6 ãƒ“ãƒ«ãƒ‰ãƒ»é…å¸ƒæ§‹æˆ

#### Chromeæ‹¡å¼µæ©Ÿèƒ½ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
```
chrome-extension/dist/
â”œâ”€â”€ manifest.json                   # ã‚³ãƒ”ãƒ¼ã•ã‚ŒãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”œâ”€â”€ background/
â”‚   â””â”€â”€ service-worker.js           # ãƒãƒ³ãƒ‰ãƒ«ã•ã‚ŒãŸService Worker
â”œâ”€â”€ content-scripts/
â”‚   â”œâ”€â”€ gmail.js                    # Gmail Content Script
â”‚   â”œâ”€â”€ discord.js                  # Discord Content Script
â”‚   â””â”€â”€ line.js                     # LINE Content Script
â”œâ”€â”€ popup/
â”‚   â”œâ”€â”€ popup.html                  # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—HTML
â”‚   â””â”€â”€ popup.js                    # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ assets/
    â”œâ”€â”€ icons/                      # ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
    â””â”€â”€ _locales/                   # å¤šè¨€èªãƒªã‚½ãƒ¼ã‚¹
```

---

## ä»˜éŒ²

### A. å‚è€ƒè³‡æ–™

#### æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Chrome Extensions Manifest V3](https://developer.chrome.com/docs/extensions/develop/migrate/what-is-mv3)
- [Gmail API Documentation](https://developers.google.com/workspace/gmail/api/guides)
- [Discord Developer Documentation](https://discord.com/developers/docs/)
- [LINE Messaging API Documentation](https://developers.line.biz/ja/docs/messaging-api/)

#### è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³
- [Repository Pattern](https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design)
- [Factory Pattern](https://refactoring.guru/design-patterns/factory-method)
- [Circuit Breaker Pattern](https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker)

### B. å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|------------|----------|
| 2024-01-10 | 1.0 | åˆç‰ˆä½œæˆ |
| 2024-01-10 | 1.1 | çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¿½åŠ  |
| 2024-01-10 | 2.0 | **è¨­è¨ˆè€…ç‰ˆç¢ºå®š**<br/>â€¢ å®Ÿè£…è©³ç´°å‰Šé™¤ï¼ˆé–‹ç™ºç’°å¢ƒã€å®Ÿè£…é †åºã€ãƒ‡ãƒ—ãƒ­ã‚¤ç­‰ï¼‰<br/>â€¢ è©³ç´°ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©è¿½åŠ <br/>â€¢ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ‹¡å……<br/>â€¢ è¨­è¨ˆè€…é©åˆ‡ç¯„å›²ã«é™å®š |
| 2024-01-10 | 2.1 | **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆè¨­è¨ˆè¿½åŠ **<br/>â€¢ å…¨ä½“ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ å®šç¾©<br/>â€¢ Chromeæ‹¡å¼µæ©Ÿèƒ½è©³ç´°ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ<br/>â€¢ LINE Proxyã‚µãƒ¼ãƒãƒ¼æ§‹æˆ<br/>â€¢ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ»å‘½åè¦å‰‡ãƒ»ãƒ“ãƒ«ãƒ‰æ§‹æˆè¿½åŠ  |

---

**æ–‡æ›¸ä½œæˆè€…**: AIè¨­è¨ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ  
**æ–‡æ›¸ç¨®åˆ¥**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸ï¼ˆè¨­è¨ˆè€…ç‰ˆï¼‰  
**å¯¾è±¡èª­è€…**: å®Ÿè£…è€…ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€æŠ€è¡“è²¬ä»»è€…  
**æ‰¿èªè€…**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¬ä»»è€…  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š**: å®Ÿè£…é–‹å§‹å‰ 